\chapter{@vitejs/plugin-\/react \texorpdfstring{$<$}{<}a href="{}https\+://npmjs.\+com/package/@vitejs/plugin-\/react"{} \texorpdfstring{$>$}{>}\texorpdfstring{$<$}{<}img src="{}https\+://img.\+shields.\+io/npm/v/@vitejs/plugin-\/react.\+svg"{} alt="{}npm"{}/\texorpdfstring{$>$}{>}\texorpdfstring{$<$}{<}/a\texorpdfstring{$>$}{>}}
\hypertarget{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e}{}\label{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e}\index{"@vitejs/plugin-\/react $<$a href="{}https://npmjs.com/package/"@vitejs/plugin-\/react"{} $>$$<$img src="{}https://img.shields.io/npm/v/"@vitejs/plugin-\/react.svg"{} alt="{}npm"{}/$>$$<$/a$>$@{"@vitejs/plugin-\/react $<$a href=""https://npmjs.com/package/"@vitejs/plugin-\/react"" $>$$<$img src=""https://img.shields.io/npm/v/"@vitejs/plugin-\/react.svg"" alt=""npm""/$>$$<$/a$>$}}
\label{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e_autotoc_md529}%
\Hypertarget{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e_autotoc_md529}%
 The default Vite plugin for React projects.


\begin{DoxyItemize}
\item enable \href{https://www.npmjs.com/package/react-refresh}{\texttt{ Fast Refresh}} in development (requires react \texorpdfstring{$>$}{>}= 16.\+9)
\item use the \href{https://legacy.reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html}{\texttt{ automatic JSX runtime}}
\item use custom Babel plugins/presets
\item small installation size
\end{DoxyItemize}


\begin{DoxyCode}{0}
\DoxyCodeLine{//\ vite.config.js}
\DoxyCodeLine{import\ \{\ defineConfig\ \}\ from\ 'vite'}
\DoxyCodeLine{import\ react\ from\ '@vitejs/plugin-\/react'}
\DoxyCodeLine{}
\DoxyCodeLine{export\ default\ defineConfig(\{}
\DoxyCodeLine{\ \ plugins:\ [react()],}
\DoxyCodeLine{\})}

\end{DoxyCode}
\hypertarget{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e_autotoc_md530}{}\doxysection{\texorpdfstring{Options}{Options}}\label{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e_autotoc_md530}
\hypertarget{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e_autotoc_md531}{}\doxysubsection{\texorpdfstring{include/exclude}{include/exclude}}\label{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e_autotoc_md531}
Includes {\ttfamily .js}, {\ttfamily .jsx}, {\ttfamily .ts} \& {\ttfamily .tsx} and excludes {\ttfamily /node\+\_\+modules/} by default. This option can be used to add fast refresh to {\ttfamily .mdx} files\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ defineConfig\ \}\ from\ 'vite'}
\DoxyCodeLine{import\ react\ from\ '@vitejs/plugin-\/react'}
\DoxyCodeLine{import\ mdx\ from\ '@mdx-\/js/rollup'}
\DoxyCodeLine{}
\DoxyCodeLine{export\ default\ defineConfig(\{}
\DoxyCodeLine{\ \ plugins:\ [}
\DoxyCodeLine{\ \ \ \ \{\ enforce:\ 'pre',\ ...mdx()\ \},}
\DoxyCodeLine{\ \ \ \ react(\{\ include:\ /\(\backslash\).(mdx|js|jsx|ts|tsx)\$/\ \}),}
\DoxyCodeLine{\ \ ],}
\DoxyCodeLine{\})}

\end{DoxyCode}
\hypertarget{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e_autotoc_md532}{}\doxysubsection{\texorpdfstring{jsx\+Import\+Source}{jsx\+Import\+Source}}\label{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e_autotoc_md532}
Control where the JSX factory is imported from. By default, this is inferred from {\ttfamily jsx\+Import\+Source} from corresponding a tsconfig file for a transformed file.


\begin{DoxyCode}{0}
\DoxyCodeLine{react(\{\ jsxImportSource:\ '@emotion/react'\ \})}

\end{DoxyCode}
\hypertarget{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e_autotoc_md533}{}\doxysubsection{\texorpdfstring{jsx\+Runtime}{jsx\+Runtime}}\label{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e_autotoc_md533}
By default, the plugin uses the \href{https://legacy.reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html}{\texttt{ automatic JSX runtime}}. However, if you encounter any issues, you may opt out using the {\ttfamily jsx\+Runtime} option.


\begin{DoxyCode}{0}
\DoxyCodeLine{react(\{\ jsxRuntime:\ 'classic'\ \})}

\end{DoxyCode}
\hypertarget{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e_autotoc_md534}{}\doxysubsection{\texorpdfstring{babel}{babel}}\label{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e_autotoc_md534}
The {\ttfamily babel} option lets you add plugins, presets, and \href{https://babeljs.io/docs/en/options}{\texttt{ other configuration}} to the Babel transformation performed on each included file.


\begin{DoxyCode}{0}
\DoxyCodeLine{react(\{}
\DoxyCodeLine{\ \ babel:\ \{}
\DoxyCodeLine{\ \ \ \ presets:\ [...],}
\DoxyCodeLine{\ \ \ \ //\ Your\ plugins\ run\ before\ any\ built-\/in\ transform\ (eg:\ Fast\ Refresh)}
\DoxyCodeLine{\ \ \ \ plugins:\ [...],}
\DoxyCodeLine{\ \ \ \ //\ Use\ .babelrc\ files}
\DoxyCodeLine{\ \ \ \ babelrc:\ true,}
\DoxyCodeLine{\ \ \ \ //\ Use\ babel.config.js\ files}
\DoxyCodeLine{\ \ \ \ configFile:\ true,}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\})}

\end{DoxyCode}


Note\+: When not using plugins, only esbuild is used for production builds, resulting in faster builds.\hypertarget{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e_autotoc_md535}{}\doxysubsubsection{\texorpdfstring{Proposed syntax}{Proposed syntax}}\label{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e_autotoc_md535}
If you are using ES syntax that are still in proposal status (e.\+g. class properties), you can selectively enable them with the {\ttfamily babel.\+parser\+Opts.\+plugins} option\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{react(\{}
\DoxyCodeLine{\ \ babel:\ \{}
\DoxyCodeLine{\ \ \ \ parserOpts:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ plugins:\ ['decorators-\/legacy'],}
\DoxyCodeLine{\ \ \ \ \},}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\})}

\end{DoxyCode}


This option does not enable {\itshape code transformation}. That is handled by esbuild.

{\bfseries{Note\+:}} Type\+Script syntax is handled automatically.

Here\textquotesingle{}s the \href{https://babeljs.io/docs/en/babel-parser\#ecmascript-proposalshttpsgithubcombabelproposals}{\texttt{ complete list of Babel parser plugins}}.\hypertarget{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e_autotoc_md536}{}\doxysubsection{\texorpdfstring{react\+Refresh\+Host}{react\+Refresh\+Host}}\label{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e_autotoc_md536}
The {\ttfamily react\+Refresh\+Host} option is only necessary in a module federation context. It enables HMR to work between a remote \& host application. In your remote Vite config, you would add your host origin\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{react(\{\ reactRefreshHost:\ 'http://localhost:3000'\ \})}

\end{DoxyCode}


Under the hood, this simply updates the React Fash Refresh runtime URL from {\ttfamily /@react-\/refresh} to {\ttfamily \href{http://localhost:3000/}{\texttt{ http\+://localhost\+:3000/}}@react-\/refresh} to ensure there is only one Refresh runtime across the whole application. Note that if you define {\ttfamily base} option in the host application, you need to include it in the option, like\+: {\ttfamily \href{http://localhost:3000/{base}}{\texttt{ http\+://localhost\+:3000/\{base\}}}}.\hypertarget{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e_autotoc_md537}{}\doxysection{\texorpdfstring{Middleware mode}{Middleware mode}}\label{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e_autotoc_md537}
In \href{https://vite.dev/config/server-options.html\#server-middlewaremode}{\texttt{ middleware mode}}, you should make sure your entry {\ttfamily index.\+html} file is transformed by Vite. Here\textquotesingle{}s an example for an Express server\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{app.get('/',\ async\ (req,\ res,\ next)\ =>\ \{}
\DoxyCodeLine{\ \ try\ \{}
\DoxyCodeLine{\ \ \ \ let\ html\ =\ fs.readFileSync(path.resolve(root,\ 'index.html'),\ 'utf-\/8')}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ //\ Transform\ HTML\ using\ Vite\ plugins.}
\DoxyCodeLine{\ \ \ \ html\ =\ await\ viteServer.transformIndexHtml(req.url,\ html)}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ res.send(html)}
\DoxyCodeLine{\ \ \}\ catch\ (e)\ \{}
\DoxyCodeLine{\ \ \ \ return\ next(e)}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\})}

\end{DoxyCode}


Otherwise, you\textquotesingle{}ll probably get this error\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{Uncaught\ Error:\ @vitejs/plugin-\/react\ can't\ detect\ preamble.\ Something\ is\ wrong.}

\end{DoxyCode}
\hypertarget{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e_autotoc_md538}{}\doxysection{\texorpdfstring{Consistent components exports}{Consistent components exports}}\label{md__project5___h_r_2_project5___h_r___front___end_2node__modules_2_0dvitejs_2plugin-react_2_r_e_a_d_m_e_autotoc_md538}
For React refresh to work correctly, your file should only export React components. You can find a good explanation in the \href{https://www.gatsbyjs.com/docs/reference/local-development/fast-refresh/\#how-it-works}{\texttt{ Gatsby docs}}.

If an incompatible change in exports is found, the module will be invalidated and HMR will propagate. To make it easier to export simple constants alongside your component, the module is only invalidated when their value changes.

You can catch mistakes and get more detailed warning with this \href{https://github.com/ArnaudBarre/eslint-plugin-react-refresh}{\texttt{ eslint rule}}. 