<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project 5 HR: @rolldown/pluginutils</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Project 5 HR
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">@rolldown/pluginutils</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md388"></a> A utility library for building flexible, composable filter expressions that can be used in plugin hook filters of Rolldown/Vite/Rollup/Unplugin plugins.</p>
<h1><a class="anchor" id="autotoc_md389"></a>
Installation</h1>
<div class="fragment"><div class="line">pnpm add @rolldown/pluginutils</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md390"></a>
Usage</h1>
<h2><a class="anchor" id="autotoc_md391"></a>
Simple Filters</h2>
<div class="fragment"><div class="line">import {</div>
<div class="line">  exactRegex,</div>
<div class="line">  makeIdFiltersToMatchWithQuery,</div>
<div class="line">  prefixRegex,</div>
<div class="line">} from &#39;@rolldown/pluginutils&#39;;</div>
<div class="line"> </div>
<div class="line">// Match exactly &#39;foo.js&#39;</div>
<div class="line">const filter = exactRegex(&#39;foo.js&#39;);</div>
<div class="line"> </div>
<div class="line">// Match any id starting with &#39;lib/&#39;</div>
<div class="line">const prefix = prefixRegex(&#39;lib/&#39;);</div>
<div class="line"> </div>
<div class="line">// Match ids with query params (e.g. &#39;foo.js?bar&#39;)</div>
<div class="line">const idFilters = makeIdFiltersToMatchWithQuery([&#39;**/*.js&#39;, /\.ts$/]);</div>
<div class="line"> </div>
<div class="line">// Usage in a plugin to define a hook filter</div>
<div class="line">const myPlugin = {</div>
<div class="line">  resolveId: {</div>
<div class="line">    filter: {</div>
<div class="line">      id: [exactRegex(&#39;MY_ID_TO_CHECK&#39;), /some-other-regex/],</div>
<div class="line">    },</div>
<div class="line">    handler(id) {</div>
<div class="line">      // Your code here</div>
<div class="line">    },</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md392"></a>
Composable Filters</h2>
<blockquote class="doxtable">
<p>&zwj;[!WARNING] Composable filters are not yet supported in Vite, Rolldown-Vite or unplugin. They can be used in Rolldown plugins only. </p>
</blockquote>
<div class="fragment"><div class="line">import { and, id, include, moduleType, query } from &#39;@rolldown/pluginutils&#39;;</div>
<div class="line"> </div>
<div class="line">// Build a filter expression</div>
<div class="line">const filterExpr = and(</div>
<div class="line">  id(/\.ts$/),</div>
<div class="line">  moduleType(&#39;ts&#39;),</div>
<div class="line">  query(&#39;foo&#39;, true),</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">// Usage in a plugin to define a hook filter</div>
<div class="line">const myPlugin = {</div>
<div class="line">  transform: {</div>
<div class="line">    filter: [include(filterExpr)],</div>
<div class="line">    handler(code, id, options) {</div>
<div class="line">      // Your code here</div>
<div class="line">    },</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md393"></a>
API Reference</h1>
<h2><a class="anchor" id="autotoc_md394"></a>
Simple Filters</h2>
<ul>
<li><code>exactRegex(str: string, flags?: string): RegExp</code> — Matches the exact string.</li>
<li><code>prefixRegex(str: string, flags?: string): RegExp</code> — Matches values with the given prefix.</li>
<li><code>makeIdFiltersToMatchWithQuery(input: string | RegExp | (string | RegExp)[]): string | RegExp | (string | RegExp)[]</code> — Adapts filters to match ids with query params.</li>
</ul>
<h2><a class="anchor" id="autotoc_md395"></a>
Composable Filters</h2>
<ul>
<li><code>and(...exprs)</code> / <code>or(...exprs)</code> / <code>not(expr)</code> — Logical composition of filter expressions.</li>
<li><code>id(pattern, params?)</code> — Filter by id (string or RegExp).</li>
<li><code>moduleType(type)</code> — Filter by module type (e.g. 'js', 'tsx', or 'json').</li>
<li><code>code(pattern)</code> — Filter by code content.</li>
<li><code>query(key, pattern)</code> — Filter by query parameter.</li>
<li><code>include(expr)</code> / <code>exclude(expr)</code> — Top-level include/exclude wrappers.</li>
<li><code>queries(obj)</code> — Compose multiple query filters. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
